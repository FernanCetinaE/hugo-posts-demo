<header
  x-data="{ isMobile: false, shrink: false, scrollY: 0 }"
  class="z-40 w-full"
  @scroll.window="shrink = (window.scrollY > 10 ? true : false)">
  <nav
    :class="{ 'h-24': shrink, 'h-38': !shrink, 'shadow-md': shrink}"
    class="fixed inset-0 mx-auto flex h-38 items-center justify-between bg-white/85 py-4 backdrop-blur-md transition-all duration-500 ease-in-out dark:bg-gray-900/85"
    aria-label="Global">
    <div
      class="mx-auto flex w-[1000px] flex-wrap items-center justify-between place-self-center object-center p-4">
      {{/* Logo */}}
      <div class="flex lg:flex-1">
        <a x-data href="{{ .Site.BaseURL }}" class="-m-1.5 p-1.5">
          <span class="sr-only">{{ .Site.Title }}</span>
          {{ $logoInfo := .Site.Params.logo }}
          {{ $logoW := $logoInfo.customLogoWidth | default 130 }}
          {{ $logoH := math.Min ($logoInfo.customLogoHeight | default 56) 56 }}


          <div class="w-[{{ $logoW }}px]">
            {{/* Light logo */}}
            <img
              x-show="!$store.darkMode.on"
              :class="{ 'hidden': $store.darkMode.on, 'block': !$store.darkMode.on }"
              src="{{ $logoInfo.img }}"
              class="hidden h-[{{ $logoH }}px]"
              alt="Logo" />
            {{/* Dark logo */}}
            <img
              x-show="$store.darkMode.on"
              :class="{ 'hidden': !$store.darkMode.on, 'block': $store.darkMode.on }"
              src="{{ $logoInfo.img_dark }}"
              class="hidden h-[{{ $logoH }}px]"
              alt="Logo" />
          </div>

          {{- with $logoInfo.text -}}
            <span
              class="self-center whitespace-nowrap text-2xl font-semibold dark:text-white"
              >{{ . }}</span
            >
          {{- end -}}
        </a>
      </div>

      {{/* Menu */}}
      <div class="hidden lg:flex lg:gap-x-6">
        {{ partial "menu.html" . }}
      </div>

      <div class="flex flex-1 items-center justify-end lg:space-x-1">
        <div class="flex">
          <button
            type="button"
            @click="$store.darkMode.toggle()"
            class="group p-2.5 text-sm text-gray-500 dark:text-gray-400">
            <svg
              id="theme-toggle-dark-icon"
              x-show="!$store.darkMode.on"
              :class="{ 'block': !$store.darkMode.on, 'hidden': $store.darkMode.on }"
              class="hidden h-5 w-5 group-hover:text-blue-700"
              fill="currentColor"
              viewBox="0 0 20 20"
              xmlns="http://www.w3.org/2000/svg">
              <path
                d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path>
            </svg>

            <svg
              x-show="$store.darkMode.on"
              :class="{ 'block': $store.darkMode.on, 'hidden': !$store.darkMode.on }"
              class="hidden h-5 w-5 group-hover:text-blue-700"
              fill="currentColor"
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="25696">
              <path
                d="M512 704c-106.039 0-192-85.961-192-192s85.961-192 192-192 192 85.961 192 192-85.961 192-192 192zM448 64h128v192H448V64z m0 704h128v192H448V768zM256 448v128H64V448h192z m704 0v128H768V448h192zM783.529 149.961l90.51 90.51-135.765 135.764-90.51-90.51L783.53 149.962zM285.726 647.765l90.51 90.51L240.47 874.038l-90.51-90.51 135.765-135.764z m90.51-362.04l-90.51 90.51L149.96 240.471l90.51-90.51 135.764 135.765zM874.038 783.53l-90.51 90.51-135.764-135.765 90.51-90.51L874.038 783.53z"></path>
            </svg>
          </button>
        </div>
        {{ if .Site.Params.enableSearch }}
          <div class="flex">
            <button
              type="button"
              id="search-icon"
              class="p-2.5 text-center text-sm font-medium text-gray-600 hover:text-blue-700 lg:bg-blue-700 lg:text-white hover:lg:bg-white dark:text-gray-400">
              <svg
                class="h-5 w-5"
                fill="currentColor"
                viewBox="0 0 1024 1024"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                p-id="7660">
                <path
                  d="M690.272 475.424q0-105.728-75.136-180.864t-180.864-75.136-180.864 75.136-75.136 180.864 75.136 180.864 180.864 75.136 180.864-75.136 75.136-180.864zM982.848 950.848q0 29.728-21.728 51.424t-51.424 21.728q-30.848 0-51.424-21.728l-196-195.424q-102.272 70.848-228 70.848-81.728 0-156.288-31.712t-128.576-85.728-85.728-128.576-31.712-156.288 31.712-156.288 85.728-128.576 128.576-85.728 156.288-31.712 156.288 31.712 128.576 85.728 85.728 128.576 31.712 156.288q0 125.728-70.848 228l196 196q21.152 21.152 21.152 51.424z"></path>
              </svg>
            </button>
          </div>
        {{ end }}
        <div class="flex lg:hidden">
          <button
            type="button"
            @click="isMobile = true; scrollY = window.scrollY; document.body.style.overflow = 'hidden';"
            class="group inline-flex items-center justify-center rounded-md p-2.5 text-gray-700 dark:text-gray-400">
            <span class="sr-only">Open main menu</span>
            <svg
              class="h-5 w-5 group-hover:text-blue-700"
              aria-hidden="true"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 17 14">
              <path
                stroke="currentColor"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M1 1h15M1 7h15M1 13h15" />
            </svg>
          </button>
        </div>
      </div>
    </div>
  </nav>

  {{/* Mobile menu */}}
  <div
    x-show="isMobile"
    :class="{ 'block': isMobile, 'hidden': !isMobile }"
    class="hidden"
    role="dialog"
    aria-modal="true">
    <!-- Background backdrop, show/hide based on slide-over state. -->
    <div class="fixed inset-0 z-10"></div>
    <div
      class="fixed inset-0 z-10 w-full overflow-y-auto bg-white/85 p-4 backdrop-blur-md sm:ring-1 sm:ring-gray-900/10 dark:bg-gray-900/85">
      {{/* Logo in mobile */}}
      <a
        x-data
        href="{{ .Site.BaseURL }}"
        class="mt-7 flex items-center justify-between">
        <span class="sr-only">{{ .Site.Title }}</span>

        {{ $logoInfo := .Site.Params.logo }}
        {{ $logoW := $logoInfo.customLogoWidth | default 130 }}
        {{ $logoH := math.Min ($logoInfo.customLogoHeight | default 56) 56 }}
        <div class="mx-auto w-[{{ $logoW }}px]">
          {{/* Light logo */}}
          <img
            x-show="!$store.darkMode.on"
            :class="{ 'hidden': $store.darkMode.on, 'block': !$store.darkMode.on }"
            src="{{ $logoInfo.img }}"
            class="hidden h-[{{ $logoH }}px]"
            alt="Logo" />
          {{/* Dark logo */}}
          <img
            x-show="$store.darkMode.on"
            :class="{ 'hidden': !$store.darkMode.on, 'block': $store.darkMode.on }"
            src="{{ $logoInfo.img_dark }}"
            class="hidden h-[{{ $logoH }}px]"
            alt="Logo" />
        </div>

        {{/* Text Logo */}}
        {{- with $logoInfo.text -}}
          <span
            class="self-center whitespace-nowrap text-2xl font-semibold dark:text-white"
            >{{ . }}</span
          >
        {{- end -}}
      </a>

      {{/* Menu in mobile */}}
      <div class="mt-6 flow-root">
        <div class="-my-6 divide-y divide-gray-500/10">
          <div class="flex flex-col space-y-2 py-6">
            {{ partial "mobile_menu.html" . }}
          </div>
        </div>
      </div>

      {{/* Close menu */}}
      <div class="mt-14 flex h-12 w-full flex-col items-center justify-center">
        <button
          @click="isMobile = false; document.body.style.overflow = ''; window.scrollTo(0, scrollY);"
          class="flex h-12 w-12 items-center justify-center rounded-full border border-gray-700 bg-transparent p-3 text-gray-900 shadow-xl hover:bg-gray-700 hover:text-white focus:outline-none focus:ring dark:text-gray-200 dark:hover:bg-gray-800">
          <span class="sr-only">Close menu</span>
          <svg
            fill="currentColor"
            class="h-4 w-4"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            p-id="5967">
            <path
              d="M143.616 47.104l830.08 830.08c26.24 26.24 26.24 69.888 0 96.128-26.24 26.24-69.888 26.24-96.128 0L47.488 143.232c-17.536-26.24-17.536-69.888 0-96.128 26.24-26.24 69.888-26.24 96.128 0z m0 0"
              p-id="5968"></path>
            <path
              d="M982.528 143.232L152.32 973.312c-26.24 26.24-69.888 26.24-96.128 0-26.24-26.24-26.24-69.888 0-96.128L886.4 47.104c26.24-26.24 69.888-26.24 96.128 0 17.408 26.24 17.408 69.888 0 96.128z m0 0"
              p-id="5969"></path>
          </svg>
        </button>
      </div>
    </div>
  </div>
</header>
